<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CDed's Redirect</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link rel="shortcut icon" href="https://www.favicon-generator.org/download/2024-10-28/51c1505984b2c53faa6422beaa4e5d06.ico">
  <link rel="icon" href="https://www.favicon-generator.org/download/2024-10-28/51c1505984b2c53faa6422beaa4e5d06.ico">
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }

    .min-vh-100 {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .flex-grow-1 {
      flex-grow: 1;
    }
    
    footer {
      background: linear-gradient(90deg, #4CAF50, #2196F3); /* Gradient colors */
      color: white;
      text-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3); /* Makes the text stand out */
    }

    footer p {
      margin: 0;
    }
  </style>
</head>
<body>
  <div class="d-flex flex-column min-vh-100">
    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container">
        <a class="navbar-brand" href="#">CDed's Redirect</a>
      </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="flex-grow-1"></main>

    <!-- Footer -->
    <footer class="bg-primary text-white text-center py-3">
      <p class="mb-0">Â© 2025 CDed. All rights reserved.</p>
    </footer>
  </div>

  <script>
    const data = {
      "social": {
        "youtube": {
          "link": "https://youtube.com/@cdedkosoy"
        },
        "telegram": {
          "link": "https://t.me/cdedkosoy"
        },
        "telegram_channel": {
          "link": "https://t.me/cdedkosoy_official"
        },
        "github": {
          "link": "https://github.com/cdedkosoy"
        },
        "e-mail": {
          "link": "mailto:mcdatapacks1@gmail.com"
        },
        "tumblr": {
          "link": "https://www.tumblr.com/cdedkosoy"
        },
        "boosty": {
          "link": "https://boosty.to/cdedkosoy"
        }
      },
      "minecraft": {
        "datapack": {
          "storage_stockman": {
            "link": "https://drive.google.com/file/d/1cHAA6C5qdG_I0RDQRPBK2Vufz_xp23nb/view?usp=drivesdk"
          },
          "dialogus21": {
            "link": "https://cdedkosoy.github.io/redirect/"
          },
          "package_manager": {
            "link": "https://cdedkosoy.github.io/redirect/"
          }
        }
      }
    };

    function displaySubgroupContent(currentData, categoryPath) {
      let contentHTML = `<div class="container mt-5">
        <div class="card mt-4">
          <div class="card-header">
            <h3 class="card-title">${categoryPath.join(' / ')}</h3>
          </div>
          <div class="card-body">
            <div class="row">`;
      Object.entries(currentData).forEach(([subgroup, linkData]) => {
        if (typeof linkData === 'object') {
          contentHTML += `
            <div class="col-md-6 mb-3">
              <a href="#${categoryPath.join('.')}.${subgroup}" class="btn btn-primary w-100" onclick="navigateToSubgroup('${categoryPath.join('.')}.${subgroup}')">${subgroup}</a>
            </div>
          `;
        } else {
          contentHTML += `
            <div class="col-md-6 mb-3">
              <a href="${linkData.link}" class="btn btn-primary w-100">${linkData.name}</a>
            </div>
          `;
        }
      });
      contentHTML += `
            </div>
          </div>
        </div>
      </div>`;
      document.getElementById('main-content').innerHTML = contentHTML;
    }

    function displayInitialButtons() {
      let buttonsHTML = '<div class="container mt-5">';
      for (const category in data) {
        buttonsHTML += `
          <div class="card mt-4">
            <div class="card-header">
              <h3 class="card-title">${category}</h3>
            </div>
            <div class="card-body">
              <div class="row">
                ${Object.entries(data[category]).map(([subcategory, linkData]) => {
                  let buttonHTML = '';
                  if (typeof linkData === 'object') {
                    buttonHTML = `
                      <div class="col-md-6 mb-3">
                        <a href="#${category}.${subcategory}" class="btn btn-primary w-100" onclick="navigateToSubgroup('${category}.${subcategory}')">${subcategory}</a>
                      </div>
                    `;
                  } else {
                    buttonHTML = `
                      <div class="col-md-6 mb-3">
                        <a href="${linkData.link}" class="btn btn-primary w-100">${linkData.name}</a>
                      </div>
                    `;
                  }
                  return buttonHTML;
                }).join('')}
              </div>
            </div>
          </div>
        `;
      }
      buttonsHTML += '</div>';
      document.getElementById('main-content').innerHTML = buttonsHTML;
    }

    function navigateToSubgroup(hash) {
      window.location.hash = `#${hash}`;
      setTimeout(() => handleHashChange(), 0);
    }

    function handleHashChange() {
      const shortLink = window.location.hash.substring(1);
      if (shortLink) {
        const parts = shortLink.split('.');
        if (parts.length >= 1) {
          let currentData = data;
          let categoryPath = [];
          for (let i = 0; i < parts.length; i++) {
            if (currentData[parts[i]]) {
              currentData = currentData[parts[i]];
              categoryPath.push(parts[i]);
            } else {
              currentData = null;
              break;
            }
          }
          if (currentData && currentData.link) {
            window.location.href = currentData.link;
          } else {
            displaySubgroupContent(currentData, categoryPath);
          }
        }
      } else {
        displayInitialButtons();
      }
    }

    // Ensure navigation updates content on back/forward button press
    window.addEventListener('popstate', handleHashChange);

    // Load initial content
    handleHashChange();
  </script>
</body>
</html>